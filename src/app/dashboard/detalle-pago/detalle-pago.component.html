<div class="row">
  <div class="col-12 grid-margin stretch-card">
    <div class="card">
      <div class="card-body">
        <h4 class="card-title">Detalle pagos</h4>
        <hr>
        <div class="row">
          <div class="col-12">
            <div class="d-flex justify-content-start">
              <button type="submit" class="btn btn-outline-primary btn-rounded " data-toggle="modal"
                data-target="#modalNuevoPago"><i class="icon-note"></i>Nuevo</button>
              <button type="submit" class="btn btn-outline-success btn-rounded ml-2"><i
                  class="icon-paper-clip"></i>Descargar excel</button>
            </div>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-12">
            <div class="table-responsive">
              <table class="table table-striped ">
                <thead>
                  <tr>
                    <th>Acciones</th>
                    <th>ID</th>
                    <th class="wraptxt">Nombre completo</th>
                    <th class="wraptxt">N. Ficha</th>
                    <th>Rut</th>
                    <th>Especialidad</th>
                    <th class="wraptxt">Sueldo líquido</th>
                    <th class="wraptxt">Dias a pago</th>
                    <th class="wraptxt">Valor hora extra líquido</th>
                    <th class="wraptxt">Total periodo</th>
                    <th class="wraptxt">Hora extra legal lunes a sábados</th>
                    <th class="wraptxt">Total valor hora extra líquido</th>
                    <th class="wraptxt">Diferencia días sábados</th>
                    <th class="wraptxt"> Diferencia días domingos</th>
                    <th class="wraptxt">Total Bonos</th>
                    <th class="wraptxt">Zona 10%</th>
                    <th class="wraptxt">Viático </th>
                    <th class="wraptxt">Aguinaldo</th>
                    <th class="wraptxt">Asignaciones</th>
                    <th class="wraptxt">Ajuste positivo</th>
                    <th class="wraptxt">Total ganado</th>
                    <th class="wraptxt">Anticipo</th>
                    <th class="wraptxt">Descuentos varios</th>
                    <th class="wraptxt">Remuneración a pagar</th>
                    <th class="wraptxt">Finiquito quincena</th>

                    <th class="wraptxt">Finiquito fin de mes</th>
                    <th class="wraptxt">Liquido a pagar</th>

                  </tr>

                </thead>
                <!--   <thead>
              <tr>
                <th><input type="number" placeholder="Search ID" name="search-id" id="search-id"/></th>
                <th><input type="number" placeholder="Search first name" name="search-first-name" id="search-name"/></th>
                <th><input type="number" placeholder="Search last name" name="search-last-name"/></th>
              </tr>
            </thead> -->
                <tbody *ngIf="data.length>0">
                  <tr *ngFor="let item of data;let i=index">
                    <td>
                      <button type="button" class="btn btn-outline-success btn-rounded btn-sm " data-toggle="modal"
                        data-target="#modalEditarPago" (click)="editPago(item)"><i
                          class="icon-pencil ml-1"></i></button>
                      <button type="button" class="btn btn-outline-danger btn-rounded btn-sm"><i
                          class="icon-trash ml-1"></i></button>
                    </td>
                    <td>{{item.id}}</td>
                    <td>{{item.nombre}}</td>
                    <td>
                      <div class="badge badge-pill" [ngClass]="getBadgeFicha(item.ficha)">{{item.ficha}}</div>
                    </td>
                    <td>{{item.rut}}-{{item.dig}}</td>
                    <td>{{item.especialidad}}</td>
                    <td align="right">{{item.sueldo_liq | number }}</td>
                    <td align="right">{{item.dias}}</td>
                    <td align="right">{{item.valor_hora | number}}</td>
                    <td align="right">{{item.total_periodo | number}}</td>
                    <td align="right">{{item.hor_lun_sab | number}}</td>
                    <td align="right">{{item.val_lun_sab | number}}</td>
                    <td align="right">{{item.difer_sabado | number}}</td>
                    <td align="right">{{item.difer_domingo}}</td>
                    <td align="right">{{item.total_bonos | number}}</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td align="right">{{item.asignaciones | number}}</td>
                    <td align="right">{{item.ajuste_pos | number}}</td>
                    <td align="right">{{item.total_ganado | number}}</td>
                    <td align="right">{{item.anticipo | number}}</td>
                    <td align="right">{{item.dctos_varios | number}}</td>
                    <td align="right">{{item.a_pagar | number}}</td>
                    <td></td>
                    <td align="right">{{item.finiquito | number}}</td>
                    <td align="right">{{item.liq_apagar | number}}</td>

                  </tr>

                </tbody>

                <tfoot>
                  <tr>
                    <td colspan="5"></td>
                    <th>Total periodo</th>
                    <td>{{getTotalSueldoLiq() | currency}}</td>
                    <td>-</td>

                    <td>{{getTotaltotal_periodo() | currency}}</td>
                    <td>{{getTotalValor_hora() | currency}}</td>
                    <td>{{getTotalhor_lun_sab() | currency}}</td>
                    <td>{{getTotalval_lun_sab() | currency}}</td>
                    <td>{{getTotaldifer_sabado() | currency}}</td>
                    <td>{{getTotaldifer_domingo() | currency}}</td>
                    <td>{{getTotaltotal_bonos() | currency}}</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>{{getTotalAsignaciones() | currency}}</td>
                    <td>{{getTotalajuste_pos() | currency}}</td>
                    <td>{{getTotaltotal_ganado() | currency}}</td>
                    <td>{{getTotalanticipo() | currency}}</td>
                    <td>{{getTotaldctos_varios() | currency}}</td>
                    <td>{{getTotala_pagar() | currency}}</td>
                    <td>{{getTotalfiniquito() | currency}}</td>
                    <td></td>
                    <td>{{getTotalliq_apagar() | currency}}</td>

                  </tr>
                </tfoot>
              </table>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>


<!--Modal nuevo pago-->
<div class="modal fade" id="modalNuevoPago" tabindex="-1" role="dialog" aria-labelledby="modalNuevoPagoLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalNuevoPagoLabel">Nuevo Pago</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

        <form>
          <div class="form-group row">
            <div class="col-lg-3">
              <label class="col-form-label">R.U.T</label>
            </div>
            <div class="col-lg-8">
              <input class="form-control" name="nombre" id="nombre" type="number" placeholder="Nombre de ejemplo">
            </div>
          </div>
          <div class="form-group row">
            <div class="col-lg-3">
              <label class="col-form-label">Num ficha</label>
            </div>
            <div class="col-lg-8">
              <input class="form-control" name="usuario" id="usuario" type="number" placeholder="userExample">
            </div>


          </div>
          <div class="form-group row">
            <div class="col-lg-3">
              <label class="col-form-label">Nombre</label>
            </div>
            <div class="col-lg-8">
              <input class="form-control" name="rol" id="rol" type="number" placeholder="Nombre de ejemplo">
            </div>
          </div>
          <div class="form-group row">
            <div class="col-lg-3">
              <label class="col-form-label">Especialidad</label>
            </div>
            <div class="col-lg-8">
              <select class="form-control">
                <option value="Activo">Activo</option>
                <option value="Inactivo">Inactivo</option>
              </select>
            </div>
          </div>

          <div class="form-group row">
            <div class="col-lg-3">
              <label class="col-form-label">Sueldo liquido</label>
            </div>
            <div class="col-lg-8">
              <input class="form-control" name="rol" id="rol" type="number" placeholder="000">

            </div>
          </div>

          <div class="form-group row">
            <div class="col-lg-3">
              <label class="col-form-label">Valor hora extra</label>
            </div>
            <div class="col-lg-8">
              <input class="form-control" name="rol" id="rol" type="number" placeholder="000">

            </div>
          </div>

        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success">Guardar</button>
        <button type="button" class="btn btn-light" data-dismiss="modal">Cancelar</button>
      </div>
    </div>
  </div>
</div>

<!--Modal editar pago-->
<div class="modal fade" id="modalEditarPago" tabindex="-1" role="dialog" aria-labelledby="modalNuevoPagoLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalNuevoPagoLabel">Editando pago</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

        <form class="form-sample" [formGroup]="editPagoForm">
          <p class="card-description ">
            Información personal
          </p>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group row">
                <label class="col-sm-3 col-form-label">R.U.T</label>
                <div class="col-sm-9">
                  <input class="form-control" name="nombre" id="nombre" type="text" placeholder="Nombre de ejemplo"
                    formControlName="rut" readonly>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group row">
                <label class="col-sm-3 col-form-label">Número ficha</label>
                <div class="col-sm-9">
                  <input class="form-control" name="rol" id="rol" type="text" name="ficha" formControlName="ficha"
                    readonly>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group row">
                <label class="col-sm-3 col-form-label">Nombre</label>
                <div class="col-sm-9">
                  <input class="form-control" name="rol" id="rol" type="text" placeholder="Nombre de ejemplo"
                    formControlName="nombre" readonly name="nombre">
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group row">
                <label class="col-sm-3 col-form-label">Especialidad</label>
                <div class="col-sm-9">
                  <input class="form-control" name="rol" id="rol" type="text" placeholder="Nombre de ejemplo"
                    name="especialidad" formControlName="especialidad" readonly>
                </div>
              </div>
            </div>
          </div>

          <p class="card-description ">
            Datos de pago
          </p>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group row">
                <label class="col-sm-3 col-form-label">Sueldo líquido</label>
                <div class="col-sm-9">
                  <!--  <label class="col-sm-3 col-form-label">{{editPagoForm.get('sueldoLiquido')?.value | currency}}</label> -->
                  <input type="number" class="form-control" formControlName="sueldo_liq" name="sueldoLiquido" />
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group row">
                <label class="col-sm-3 col-form-label">Dias a pago</label>
                <div class="col-sm-9">
                  <input type="number" class="form-control" formControlName="dias" name="diasPago" />
                </div>
              </div>
            </div>
            <!-- <div class="col-md-3">
              <div class="form-group row">
                <label class="col-sm-6 col-form-label">Total periodo</label>
                <div class="col-sm-6">
                  <strong class="col-sm-3 col-form-label">{{totalPeriodoEdit | currency}}</strong>

                </div>
              </div>
            </div> -->
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group row">
                <label class="col-sm-3 col-form-label">Valor hora extra líquido</label>
                <div class="col-sm-9">
                  <input type="number" class="form-control" formControlName="valor_hora" name="valorHoraExtraLiquido" />
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group row">
                <label class="col-sm-3 col-form-label">Asignaciones</label>
                <div class="col-sm-9">
                  <input type="number" class="form-control" formControlName="asignaciones" name="asignaciones" />
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group row">
                <label class="col-sm-3 col-form-label">Ajuste positivo</label>
                <div class="col-sm-9">
                  <input type="number" class="form-control" formControlName="ajuste_pos" name="ajustePositivo" />
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group row">
                <label class="col-sm-3 col-form-label">Anticipo</label>
                <div class="col-sm-9">
                  <input type="number" class="form-control" formControlName="anticipo" name="anticipo" />
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group row">
                <label class="col-sm-3 col-form-label">Descuentos varios</label>
                <div class="col-sm-9">
                  <input type="number" class="form-control" formControlName="dctos_varios" name="descuentosVarios" />
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group row">
                <label class="col-sm-3 col-form-label">Finiquito fin de mes</label>
                <div class="col-sm-9">
                  <input type="number" class="form-control" formControlName="finiquito" name="finiquito" />
                </div>
              </div>
            </div>
          </div>




        </form>
        <div class="row">
          <div class="d-flex justify-content-end">
            <div class="col-12">
              <div class="table">
                <table class="table table-striped">
                  <tr>
                    <td>
                      <label >Total periodo:</label>
                    </td>
                    <td>
                      <strong >{{totalPeriodoEdit | currency}}</strong>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <label >Remuneración a pagar:</label>
                    </td>
                    <td>
                      <strong>{{totalRemuneracionEdit | currency}}</strong>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <label >Total descuentos:</label>
                    </td>
                    <td>
                      <strong >{{totalDesctEdit | currency}}</strong>
                    </td>
                  </tr>
                </table>
              </div>
            </div>

          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success" [disabled]="!editPagoForm.valid">Editar pago</button>
        <button type="button" class="btn btn-light" data-dismiss="modal">Cancelar</button>
      </div>
    </div>
  </div>
</div>
